!--------------------------------------------------
!- Friday, November 15, 2019 12:39:00 PM
!- Import of : 
!- c:\dev\_cbm\work\switcheroo 1.0.prg
!- Commodore 64
!--------------------------------------------------
1 IFPEEK(829)=13THENPOKE829,0:GOTO1050
5 IFPEEK(828)<>16THENPOKE828,16:LOAD"v2.5 ml",8,1
10 POKE53280,10:POKE53281,2:PRINT"{yellow}{clear}";
20 PRINT"{down*3}{right*7}miniword switcheroo v1.0"
30 PRINT"{down}1) miniword to ascii (seq)"
40 PRINT"2) ascii (seq) to miniword"
50 GETA$:IFA$<>"1"ANDA$<>"2"THEN50
60 IFA$="1"THEN1000
70 IFA$="2"THEN2000
1000 INPUT"filename";FI$:POKE829,13:LOADFI$,8,1
1050 TL=PEEK(14999)+256*PEEK(15000)
1060 OPEN8,8,8,"@0:"+FI$+"/a,s,w"
1070 PRINT"{clear}";:FORI=1TOTL:PRINT"W";:NEXTI
1080 PRINT"{home}";:FORI=0TOTL:PRINT"Q";:FORT=0TO39
1090 BT=PEEK(15001+(I*40)+T)
1100 IFBT>0ANDBT<27THENBT=BT+64:GOTO1140
1110 IFBT>32ANDBT<64THEN1140
1120 IFBT>64ANDBT<91THENBT=BT+128:GOTO1140
1130 BT=32
1140 A$=CHR$(BT):PRINT#8,A$;:NEXTT:NEXTI
1150 CLOSE8:PRINT:PRINT"{down*3} done."
1160 END
2000 SYS 49152
2005 INPUT"filename";FI$:OPEN8,8,8,FI$+",s,r":PRINT"{clear}";
2010 GET#8,A$:A=A+1:IFSTTHEN2500
2015 IFA/40=INT(A/40)THENPRINT"-";
2020 BT=ASC(A$):IFBT>64ANDBT<91THENBT=BT-64:GOTO2050
2025 IFBT=13THENGOSUB3000:GOTO2010
2030 IFBT>31ANDBT<64THEN2050
2040 IFBT>191ANDBT<233THENBT=BT-128:GOTO2050
2045 BT=32
2050 POKE15000+A,BT:GOTO2010
2500 CLOSE8:TL=INT(A/40):TL=TL+1:EL=15001+A
2510 IFTL<=255THENPOKE14999,TL:POKE15000,0:GOTO2520
2515 I=INT(TL/256):U=I*256:TL=TL-U:POKE14999,TL:POKE15000,I
2520 FI$=FI$+"/m":OPEN1,8,15,"s0:"+FI$:CLOSE1
2530 SYS49241,FI$,8,14999,EL+1
2540 PRINT"done.":END
3000 I1=INT(A/40):I2=I1*40:I3=A-I2:I4=40-I3:A=A+I4:RETURN
